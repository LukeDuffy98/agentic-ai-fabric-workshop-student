<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="720" viewBox="0 0 1200 720" role="img" aria-label="Lab 2 architecture sketch: Fabric workspace and lakehouse ingest via Dataflow Gen2, publish a Fabric data agent, use Power BI Copilot, and connect to Foundry agent via Fabric tool.">
  <defs>
    <style><![CDATA[
      :root { --bg:#071018; --panel:#0f1f2e; --stroke:#20445f; --text:#eaf3ff; --muted:#b8d3f2; --accent:#5fb3ff; --accent2:#7ee3c2; --accent3:#ffd27a; --accent4:#c8a6ff; }
      .bg { fill: var(--bg); }
      .panel { fill: var(--panel); stroke: var(--stroke); stroke-width:2; rx:16; }
      .title { font: 700 26px "Segoe UI", Arial, sans-serif; fill: var(--text); }
      .h { font: 700 18px "Segoe UI", Arial, sans-serif; fill: var(--text); }
      .t { font: 400 14px "Segoe UI", Arial, sans-serif; fill: var(--text); }
      .m { font: 400 13px "Segoe UI", Arial, sans-serif; fill: var(--muted); }
      .note { font: 400 12px "Segoe UI", Arial, sans-serif; fill: var(--muted); }
      .pillA { fill: rgba(95,179,255,0.14); stroke: var(--accent); stroke-width:1.5; rx:999; }
      .pillB { fill: rgba(126,227,194,0.14); stroke: var(--accent2); stroke-width:1.5; rx:999; }
      .pillC { fill: rgba(255,210,122,0.16); stroke: var(--accent3); stroke-width:1.5; rx:999; }
      .pillD { fill: rgba(200,166,255,0.14); stroke: var(--accent4); stroke-width:1.5; rx:999; }
      .arrow { stroke: var(--muted); stroke-width:2.5; fill:none; marker-end:url(#arrowHead); }
      .arrowA { stroke: var(--accent); stroke-width:2.5; fill:none; marker-end:url(#arrowHeadA); }
      .arrowB { stroke: var(--accent2); stroke-width:2.5; fill:none; marker-end:url(#arrowHeadB); }
      .arrowC { stroke: var(--accent4); stroke-width:2.5; fill:none; marker-end:url(#arrowHeadD); }
    ]]></style>

    <marker id="arrowHead" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#b8d3f2" />
    </marker>
    <marker id="arrowHeadA" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#5fb3ff" />
    </marker>
    <marker id="arrowHeadB" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#7ee3c2" />
    </marker>
    <marker id="arrowHeadD" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#c8a6ff" />
    </marker>

    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="8" stdDeviation="10" flood-color="#000" flood-opacity="0.35"/>
    </filter>
  </defs>

  <rect class="bg" x="0" y="0" width="1200" height="720" />

  <text class="title" x="48" y="58">Lab 2 — Fabric data → Data agent → Copilot → Foundry tool (portal-only)</text>
  <text class="note" x="48" y="86">Student builds a workspace + lakehouse, ingests from URL with Dataflow Gen2, publishes a data agent, chats in Power BI Copilot, then connects to Foundry (classic).</text>

  <!-- Fabric workspace container -->
  <rect class="panel" filter="url(#shadow)" x="48" y="130" width="720" height="450" />
  <text class="h" x="72" y="165">Microsoft Fabric</text>
  <text class="m" x="72" y="192">Workspace: Lab2_&lt;&lt;STUDENT_ID&gt;&gt;  •  Capacity: &lt;&lt;FABRIC_CAPACITY_NAME&gt;&gt;</text>

  <!-- External source -->
  <rect class="panel" filter="url(#shadow)" x="72" y="225" width="300" height="120" />
  <text class="h" x="96" y="258">Raw data source (URL)</text>
  <text class="m" x="96" y="285">OData: Northwind sample service</text>
  <rect class="pillA" x="96" y="300" width="252" height="32" />
  <text class="t" x="112" y="321">Orders entity</text>

  <!-- Dataflow Gen2 -->
  <rect class="panel" filter="url(#shadow)" x="410" y="205" width="330" height="160" />
  <text class="h" x="434" y="238">Dataflow Gen2</text>
  <text class="m" x="434" y="265">df_orders_&lt;&lt;STUDENT_ID&gt;&gt;</text>
  <rect class="pillB" x="434" y="285" width="282" height="32" />
  <text class="t" x="452" y="306">Copilot assists authoring</text>
  <rect class="pillC" x="434" y="322" width="282" height="32" />
  <text class="t" x="452" y="343">Refresh now (deterministic)</text>

  <!-- Lakehouse -->
  <rect class="panel" filter="url(#shadow)" x="72" y="385" width="668" height="170" />
  <text class="h" x="96" y="418">Lakehouse</text>
  <text class="m" x="96" y="445">lh_orders_&lt;&lt;STUDENT_ID&gt;&gt;  •  Table: orders  •  Update method: Replace</text>
  <rect class="pillA" x="96" y="465" width="280" height="32" />
  <text class="t" x="112" y="486">Lakehouse table: orders</text>
  <rect class="pillB" x="392" y="465" width="324" height="32" />
  <text class="t" x="410" y="486">Data stored for downstream querying</text>

  <!-- Fabric data agent -->
  <rect class="panel" filter="url(#shadow)" x="790" y="170" width="360" height="170" />
  <text class="h" x="814" y="203">Fabric data agent</text>
  <text class="m" x="814" y="230">da_orders_&lt;&lt;STUDENT_ID&gt;&gt; (published)</text>
  <rect class="pillA" x="814" y="250" width="312" height="32" />
  <text class="t" x="832" y="271">Scopes tables + semantic layer</text>
  <text class="note" x="814" y="304">Published URL contains /groups/&lt;workspace-id&gt;/aiskills/&lt;artifact-id&gt;</text>

  <!-- Power BI Copilot -->
  <rect class="panel" filter="url(#shadow)" x="790" y="370" width="360" height="170" />
  <text class="h" x="814" y="403">Power BI (Copilot)</text>
  <text class="m" x="814" y="430">Standalone Copilot experience</text>
  <rect class="pillB" x="814" y="450" width="312" height="32" />
  <text class="t" x="832" y="471">Add items → Data agents</text>
  <rect class="pillC" x="814" y="487" width="312" height="32" />
  <text class="t" x="832" y="508">Ask questions + validate</text>

  <!-- Foundry -->
  <rect class="panel" filter="url(#shadow)" x="48" y="610" width="1102" height="90" />
  <text class="h" x="72" y="646">Microsoft Foundry (classic)</text>
  <text class="m" x="72" y="672">Agent: Lab2-&lt;&lt;STUDENT_ID&gt;&gt; connects to Fabric data agent via workspace-id + artifact-id (marked secret)</text>

  <!-- Flows -->
  <path class="arrowA" d="M372 285 C390 285, 400 285, 410 285" />
  <text class="note" x="300" y="270">Ingest</text>

  <path class="arrowA" d="M575 365 C560 385, 520 405, 470 420" />
  <text class="note" x="520" y="390">Load to lakehouse</text>

  <path class="arrowB" d="M740 470 C770 440, 790 420, 800 410" opacity="0"/>

  <path class="arrowB" d="M420 485 C560 540, 730 535, 790 500" />
  <text class="note" x="560" y="548">Data agent + Copilot consume</text>

  <path class="arrowB" d="M920 340 C920 360, 920 360, 920 370" />
  <text class="note" x="940" y="360">Publish</text>

  <path class="arrowB" d="M920 540 C920 585, 920 585, 920 610" />
  <text class="note" x="940" y="585">Connect as tool</text>

  <path class="arrowC" d="M920 540 C760 585, 420 595, 180 620" opacity="0"/>

  <!-- Legend -->
  <rect class="panel" x="900" y="20" width="250" height="86" />
  <text class="h" x="924" y="52">Legend</text>
  <text class="m" x="924" y="74">Blue: data ingestion</text>
  <text class="m" x="924" y="94">Green: AI consumption</text>
</svg>
